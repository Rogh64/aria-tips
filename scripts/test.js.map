{"version":3,"sources":["node_modules/browser-sync-brunch/lib/vendor/browser-sync-injector.js","vendor/highlight/highlight.pack.js","src/aria-tips.coffee"],"names":[],"mappings":"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","file":"dist/scripts/test.js","sourcesContent":["(function(/* BrowserSync-Brunch */) {\n  var url = \"//\" + location.hostname + \":3000/browser-sync/browser-sync-client.2.1.6.js\";\n  var bs = document.createElement(\"script\");\n  bs.type = \"text/javascript\"; bs.async = true; bs.src = url;\n  var s = document.getElementsByTagName(\"script\")[0];\n  s.parentNode.insertBefore(bs, s);\n})();","!function(e){\"undefined\"!=typeof exports?e(exports):(window.hljs=e({}),\"function\"==typeof define&&define.amd&&define([],function(){return window.hljs}))}(function(e){function n(e){return e.replace(/&/gm,\"&amp;\").replace(/</gm,\"&lt;\").replace(/>/gm,\"&gt;\")}function t(e){return e.nodeName.toLowerCase()}function r(e,n){var t=e&&e.exec(n);return t&&0==t.index}function a(e){var n=(e.className+\" \"+(e.parentNode?e.parentNode.className:\"\")).split(/\\s+/);return n=n.map(function(e){return e.replace(/^lang(uage)?-/,\"\")}),n.filter(function(e){return N(e)||/no(-?)highlight|plain|text/.test(e)})[0]}function i(e,n){var t,r={};for(t in e)r[t]=e[t];if(n)for(t in n)r[t]=n[t];return r}function o(e){var n=[];return function r(e,a){for(var i=e.firstChild;i;i=i.nextSibling)3==i.nodeType?a+=i.nodeValue.length:1==i.nodeType&&(n.push({event:\"start\",offset:a,node:i}),a=r(i,a),t(i).match(/br|hr|img|input/)||n.push({event:\"stop\",offset:a,node:i}));return a}(e,0),n}function u(e,r,a){function i(){return e.length&&r.length?e[0].offset!=r[0].offset?e[0].offset<r[0].offset?e:r:\"start\"==r[0].event?e:r:e.length?e:r}function o(e){function r(e){return\" \"+e.nodeName+'=\"'+n(e.value)+'\"'}l+=\"<\"+t(e)+Array.prototype.map.call(e.attributes,r).join(\"\")+\">\"}function u(e){l+=\"</\"+t(e)+\">\"}function c(e){(\"start\"==e.event?o:u)(e.node)}for(var s=0,l=\"\",f=[];e.length||r.length;){var g=i();if(l+=n(a.substr(s,g[0].offset-s)),s=g[0].offset,g==e){f.reverse().forEach(u);do c(g.splice(0,1)[0]),g=i();while(g==e&&g.length&&g[0].offset==s);f.reverse().forEach(o)}else\"start\"==g[0].event?f.push(g[0].node):f.pop(),c(g.splice(0,1)[0])}return l+n(a.substr(s))}function c(e){function n(e){return e&&e.source||e}function t(t,r){return new RegExp(n(t),\"m\"+(e.cI?\"i\":\"\")+(r?\"g\":\"\"))}function r(a,o){if(!a.compiled){if(a.compiled=!0,a.k=a.k||a.bK,a.k){var u={},c=function(n,t){e.cI&&(t=t.toLowerCase()),t.split(\" \").forEach(function(e){var t=e.split(\"|\");u[t[0]]=[n,t[1]?Number(t[1]):1]})};\"string\"==typeof a.k?c(\"keyword\",a.k):Object.keys(a.k).forEach(function(e){c(e,a.k[e])}),a.k=u}a.lR=t(a.l||/\\b\\w+\\b/,!0),o&&(a.bK&&(a.b=\"\\\\b(\"+a.bK.split(\" \").join(\"|\")+\")\\\\b\"),a.b||(a.b=/\\B|\\b/),a.bR=t(a.b),a.e||a.eW||(a.e=/\\B|\\b/),a.e&&(a.eR=t(a.e)),a.tE=n(a.e)||\"\",a.eW&&o.tE&&(a.tE+=(a.e?\"|\":\"\")+o.tE)),a.i&&(a.iR=t(a.i)),void 0===a.r&&(a.r=1),a.c||(a.c=[]);var s=[];a.c.forEach(function(e){e.v?e.v.forEach(function(n){s.push(i(e,n))}):s.push(\"self\"==e?a:e)}),a.c=s,a.c.forEach(function(e){r(e,a)}),a.starts&&r(a.starts,o);var l=a.c.map(function(e){return e.bK?\"\\\\.?(\"+e.b+\")\\\\.?\":e.b}).concat([a.tE,a.i]).map(n).filter(Boolean);a.t=l.length?t(l.join(\"|\"),!0):{exec:function(){return null}}}}r(e)}function s(e,t,a,i){function o(e,n){for(var t=0;t<n.c.length;t++)if(r(n.c[t].bR,e))return n.c[t]}function u(e,n){if(r(e.eR,n)){for(;e.endsParent&&e.parent;)e=e.parent;return e}return e.eW?u(e.parent,n):void 0}function f(e,n){return!a&&r(n.iR,e)}function g(e,n){var t=E.cI?n[0].toLowerCase():n[0];return e.k.hasOwnProperty(t)&&e.k[t]}function p(e,n,t,r){var a=r?\"\":x.classPrefix,i='<span class=\"'+a,o=t?\"\":\"</span>\";return i+=e+'\">',i+n+o}function d(){if(!L.k)return n(y);var e=\"\",t=0;L.lR.lastIndex=0;for(var r=L.lR.exec(y);r;){e+=n(y.substr(t,r.index-t));var a=g(L,r);a?(B+=a[1],e+=p(a[0],n(r[0]))):e+=n(r[0]),t=L.lR.lastIndex,r=L.lR.exec(y)}return e+n(y.substr(t))}function h(){if(L.sL&&!w[L.sL])return n(y);var e=L.sL?s(L.sL,y,!0,M[L.sL]):l(y);return L.r>0&&(B+=e.r),\"continuous\"==L.subLanguageMode&&(M[L.sL]=e.top),p(e.language,e.value,!1,!0)}function b(){return void 0!==L.sL?h():d()}function v(e,t){var r=e.cN?p(e.cN,\"\",!0):\"\";e.rB?(k+=r,y=\"\"):e.eB?(k+=n(t)+r,y=\"\"):(k+=r,y=t),L=Object.create(e,{parent:{value:L}})}function m(e,t){if(y+=e,void 0===t)return k+=b(),0;var r=o(t,L);if(r)return k+=b(),v(r,t),r.rB?0:t.length;var a=u(L,t);if(a){var i=L;i.rE||i.eE||(y+=t),k+=b();do L.cN&&(k+=\"</span>\"),B+=L.r,L=L.parent;while(L!=a.parent);return i.eE&&(k+=n(t)),y=\"\",a.starts&&v(a.starts,\"\"),i.rE?0:t.length}if(f(t,L))throw new Error('Illegal lexeme \"'+t+'\" for mode \"'+(L.cN||\"<unnamed>\")+'\"');return y+=t,t.length||1}var E=N(e);if(!E)throw new Error('Unknown language: \"'+e+'\"');c(E);var R,L=i||E,M={},k=\"\";for(R=L;R!=E;R=R.parent)R.cN&&(k=p(R.cN,\"\",!0)+k);var y=\"\",B=0;try{for(var C,j,I=0;;){if(L.t.lastIndex=I,C=L.t.exec(t),!C)break;j=m(t.substr(I,C.index-I),C[0]),I=C.index+j}for(m(t.substr(I)),R=L;R.parent;R=R.parent)R.cN&&(k+=\"</span>\");return{r:B,value:k,language:e,top:L}}catch(S){if(-1!=S.message.indexOf(\"Illegal\"))return{r:0,value:n(t)};throw S}}function l(e,t){t=t||x.languages||Object.keys(w);var r={r:0,value:n(e)},a=r;return t.forEach(function(n){if(N(n)){var t=s(n,e,!1);t.language=n,t.r>a.r&&(a=t),t.r>r.r&&(a=r,r=t)}}),a.language&&(r.second_best=a),r}function f(e){return x.tabReplace&&(e=e.replace(/^((<[^>]+>|\\t)+)/gm,function(e,n){return n.replace(/\\t/g,x.tabReplace)})),x.useBR&&(e=e.replace(/\\n/g,\"<br>\")),e}function g(e,n,t){var r=n?E[n]:t,a=[e.trim()];return e.match(/\\bhljs\\b/)||a.push(\"hljs\"),-1===e.indexOf(r)&&a.push(r),a.join(\" \").trim()}function p(e){var n=a(e);if(!/no(-?)highlight|plain|text/.test(n)){var t;x.useBR?(t=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"div\"),t.innerHTML=e.innerHTML.replace(/\\n/g,\"\").replace(/<br[ \\/]*>/g,\"\\n\")):t=e;var r=t.textContent,i=n?s(n,r,!0):l(r),c=o(t);if(c.length){var p=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"div\");p.innerHTML=i.value,i.value=u(c,o(p),r)}i.value=f(i.value),e.innerHTML=i.value,e.className=g(e.className,n,i.language),e.result={language:i.language,re:i.r},i.second_best&&(e.second_best={language:i.second_best.language,re:i.second_best.r})}}function d(e){x=i(x,e)}function h(){if(!h.called){h.called=!0;var e=document.querySelectorAll(\"pre code\");Array.prototype.forEach.call(e,p)}}function b(){addEventListener(\"DOMContentLoaded\",h,!1),addEventListener(\"load\",h,!1)}function v(n,t){var r=w[n]=t(e);r.aliases&&r.aliases.forEach(function(e){E[e]=n})}function m(){return Object.keys(w)}function N(e){return w[e]||w[E[e]]}var x={classPrefix:\"hljs-\",tabReplace:null,useBR:!1,languages:void 0},w={},E={};return e.highlight=s,e.highlightAuto=l,e.fixMarkup=f,e.highlightBlock=p,e.configure=d,e.initHighlighting=h,e.initHighlightingOnLoad=b,e.registerLanguage=v,e.listLanguages=m,e.getLanguage=N,e.inherit=i,e.IR=\"[a-zA-Z]\\\\w*\",e.UIR=\"[a-zA-Z_]\\\\w*\",e.NR=\"\\\\b\\\\d+(\\\\.\\\\d+)?\",e.CNR=\"\\\\b(0[xX][a-fA-F0-9]+|(\\\\d+(\\\\.\\\\d*)?|\\\\.\\\\d+)([eE][-+]?\\\\d+)?)\",e.BNR=\"\\\\b(0b[01]+)\",e.RSR=\"!|!=|!==|%|%=|&|&&|&=|\\\\*|\\\\*=|\\\\+|\\\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\\\?|\\\\[|\\\\{|\\\\(|\\\\^|\\\\^=|\\\\||\\\\|=|\\\\|\\\\||~\",e.BE={b:\"\\\\\\\\[\\\\s\\\\S]\",r:0},e.ASM={cN:\"string\",b:\"'\",e:\"'\",i:\"\\\\n\",c:[e.BE]},e.QSM={cN:\"string\",b:'\"',e:'\"',i:\"\\\\n\",c:[e.BE]},e.PWM={b:/\\b(a|an|the|are|I|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such)\\b/},e.C=function(n,t,r){var a=e.inherit({cN:\"comment\",b:n,e:t,c:[]},r||{});return a.c.push(e.PWM),a},e.CLCM=e.C(\"//\",\"$\"),e.CBCM=e.C(\"/\\\\*\",\"\\\\*/\"),e.HCM=e.C(\"#\",\"$\"),e.NM={cN:\"number\",b:e.NR,r:0},e.CNM={cN:\"number\",b:e.CNR,r:0},e.BNM={cN:\"number\",b:e.BNR,r:0},e.CSSNM={cN:\"number\",b:e.NR+\"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?\",r:0},e.RM={cN:\"regexp\",b:/\\//,e:/\\/[gimuy]*/,i:/\\n/,c:[e.BE,{b:/\\[/,e:/\\]/,r:0,c:[e.BE]}]},e.TM={cN:\"title\",b:e.IR,r:0},e.UTM={cN:\"title\",b:e.UIR,r:0},e});hljs.registerLanguage(\"xml\",function(t){var e=\"[A-Za-z0-9\\\\._:-]+\",s={b:/<\\?(php)?(?!\\w)/,e:/\\?>/,sL:\"php\",subLanguageMode:\"continuous\"},c={eW:!0,i:/</,r:0,c:[s,{cN:\"attribute\",b:e,r:0},{b:\"=\",r:0,c:[{cN:\"value\",c:[s],v:[{b:/\"/,e:/\"/},{b:/'/,e:/'/},{b:/[^\\s\\/>]+/}]}]}]};return{aliases:[\"html\",\"xhtml\",\"rss\",\"atom\",\"xsl\",\"plist\"],cI:!0,c:[{cN:\"doctype\",b:\"<!DOCTYPE\",e:\">\",r:10,c:[{b:\"\\\\[\",e:\"\\\\]\"}]},t.C(\"<!--\",\"-->\",{r:10}),{cN:\"cdata\",b:\"<\\\\!\\\\[CDATA\\\\[\",e:\"\\\\]\\\\]>\",r:10},{cN:\"tag\",b:\"<style(?=\\\\s|>|$)\",e:\">\",k:{title:\"style\"},c:[c],starts:{e:\"</style>\",rE:!0,sL:\"css\"}},{cN:\"tag\",b:\"<script(?=\\\\s|>|$)\",e:\">\",k:{title:\"script\"},c:[c],starts:{e:\"</script>\",rE:!0,sL:\"\"}},s,{cN:\"pi\",b:/<\\?\\w+/,e:/\\?>/,r:10},{cN:\"tag\",b:\"</?\",e:\"/?>\",c:[{cN:\"title\",b:/[^ \\/><\\n\\t]+/,r:0},c]}]}});","# Wrappers for AMD and CommonJS. Fallback to global scope.\n((root, factory) ->\n\n    # If AMD is used.\n    if typeof define is 'function' and define.amd\n        define [], factory\n\n    # If CommonJS is used.\n    else if typeof module is 'object' and module.exports\n        module.exports = factory()\n\n    # Otherwise bind to `window` object.\n    else\n        root.AriaTips = factory()\n\n)(this, ->\n\n    ###\n        * Tooltips are the elements that are displayed when the mouse hovers a\n        trigger.\n\n        * Triggers are the elements that listen to mouseover events in order to\n        show the tooltips.\n    ###\n\n\n    # Number of pixels the tooltip's arrow takes.\n    ARROW_DELTA = 6\n\n\n    # Unbinders are functions that unbind events on triggers. They are defined\n    # when the events are bound.\n    unbinders = []\n\n\n    # Do all the magic needed to show the tooltips!\n    bindAll = ->\n        # Unbind all existing events in order to prevent listening to the same\n        # event multiple times.\n        unbindAll()\n\n        # Get all tooltips in the DOM.\n        tips = document.querySelectorAll '[role=tooltip]'\n\n        for tip in tips\n            # Tooltips need to be appended to body for global positioning.\n            document.body.appendChild tip\n\n            # Get all triggers in the DOM.\n            triggers = document.querySelectorAll \"[aria-describedby=#{tip.id}]\"\n            for trigger in triggers\n\n                # Bind the mouseover/mouseout events on the trigger.\n                unbinder = bindEvents.call trigger\n\n                # Store the returned function to unbind the events if needed.\n                unbinders.push unbinder\n\n\n    # Remove all the magic that show the tooltips.\n    unbindAll = ->\n        unbinder() for unbinder in unbinders\n        unbinders = []\n\n\n    # Return the opposite position, given a position.\n    oppositePosition = (position) ->\n        switch position\n            when 'top'    then 'bottom'\n            when 'bottom' then 'top'\n            when 'left'   then 'right'\n            when 'right'  then 'left'\n\n\n    # Position the tooltip to its trigger.\n    # `this` must reference the tooltip.\n    positionTooltip = (trigger) ->\n\n        # Reset tooltip's direction if it has been previously overriden.\n        resetTooltip.call this\n\n        # Direction can be defined in the trigger or in the tooltip. The trigger\n        # has priority.\n        direction = trigger.dataset.tooltipDirection or \\\n                    @dataset.tooltipDirection\n\n        # Get the trigger's center coordinates.\n        boundingBox = trigger.getBoundingClientRect()\n        center =\n            x: 0 | boundingBox.left + (boundingBox.right - boundingBox.left) / 2\n            y: 0 | boundingBox.top + (boundingBox.bottom - boundingBox.top) / 2\n\n        # Add page offset to get the right position when the page is scrolled.\n        center.x = center.x + window.pageXOffset\n        center.y = center.y + window.pageYOffset\n\n        # Initialize the tooltip positionning.\n        result =\n            top:    'auto'\n            bottom: 'auto'\n            left:   'auto'\n            right:  'auto'\n\n        # Get the direction's position value.\n        position = switch direction\n            when 'top'\n                window.innerHeight - boundingBox.top - window.pageYOffset\n            when 'bottom'\n                boundingBox.bottom + window.pageYOffset\n            when 'left'\n                window.innerWidth - boundingBox.left - window.pageXOffset\n            when 'right'\n                boundingBox.right + window.pageXOffset\n\n        # Get the opposite direction's position value.\n        oppositeDirection = oppositePosition direction\n        result[oppositeDirection] = \"#{0 | position + ARROW_DELTA}px\"\n\n        # Set the position for the axis perpendicular to the one defined\n        # by (position, oppositeDirection).\n        switch direction\n            when 'top', 'bottom' then result.left = \"#{center.x}px\"\n            when 'left', 'right' then result.top = \"#{center.y}px\"\n\n        # Perform the positioning by setting the tooltip's attributes.\n        @style[prop] = value for prop, value of result\n\n        # If the default tooltip's direction has been overriden by the trigger,\n        # we must keep the original direction, and set the overriden direction\n        # to the tooltip.\n        unless direction is @dataset.tooltipDirection\n            @origDirection = @dataset.tooltipDirection\n            @dataset.tooltipDirection = direction\n\n\n    # Reset tooltip's direction.\n    # `this` must reference the tooltip.\n    resetTooltip = ->\n        if @origDirection\n            @dataset.tooltipDirection = @origDirection\n            @origDirection = null\n\n\n    # If the trigger has a defined `aria-label`, the lib automatically appends\n    # it in a `pre` tag.\n    # `this` must reference the tooltip.\n    fillTooltipLabel = (trigger) ->\n\n        # Remove existing labels in the tooltip.\n        labels = @querySelectorAll 'pre.label'\n        label.parentNode.removeChild label for label in labels\n\n        # Get label from the trigger.\n        labelText = trigger.getAttribute 'aria-label'\n\n        # If there is one, append it to the tooltip.\n        if labelText\n            label = document.createElement 'pre'\n            label.classList.add 'label'\n            label.innerHTML = \"(#{labelText})\"\n            @appendChild label\n\n\n    # Bind events on for a given trigger element.\n    # `this` must reference the trigger element.\n    bindEvents = ->\n\n        # Get the related tooltip\n        tooltipId = @getAttribute 'aria-describedby'\n        tip = document.querySelector \"##{tooltipId}\"\n\n        # Initialize timeout in the scope.\n        timeout = null\n\n        # `mouseover` event handler.\n        onMouseOver = =>\n\n            # Since the tooltip's appearance animation make the trigger lose\n            # the focus, the tooltip needs to be its own trigger to prevent it\n            # from \"flashing\". It's basically a debounce mechanism.\n            tip.addEventListener 'mouseover', onMouseOver\n            tip.addEventListener 'mouseout', onMouseOut\n\n            # If the tooltip is appearing or disappearing, clear the timeout.\n            if timeout\n                clearTimeout timeout\n                timeout = null\n                tip.setAttribute 'aria-hidden', false\n            else\n                # Initialize the tooltip.\n                fillTooltipLabel.call tip, this\n\n                # Position the tooltip.\n                positionTooltip.call tip, this\n\n                # Mark as shown after a short duration.\n                timeout = setTimeout ->\n                    tip.setAttribute 'aria-hidden', false\n                , 300\n\n        # `mouseover` event handler.\n        onMouseOut = ->\n\n            # For the same reason as in `onMouseOver`, we debounce the\n            # `mouseout` event handler.\n            clearTimeout timeout\n            timeout = setTimeout ->\n                timeout = null\n                tip.removeEventListener 'mouseover', onMouseOver\n                tip.removeEventListener 'mouseout', onMouseOut\n                tip.setAttribute 'aria-hidden', true\n            , 30\n\n\n        # Bind the actual events.\n        @addEventListener 'mouseover', onMouseOver\n        @addEventListener 'mouseout', onMouseOut\n\n        # Since a tooltip management is scoped (there is one pair of handlers\n        # for onMouseOver/onMouseOut events for each trigger), we return an\n        # unbind function so it can be called later on.\n        unbindEvents = =>\n            tip.removeEventListener 'mouseover', onMouseOver\n            tip.removeEventListener 'mouseout', onMouseOut\n            @removeEventListener 'mouseover', onMouseOver\n            @removeEventListener 'mouseout', onMouseOut\n\n        return unbindEvents\n\n\n    # The module's public interface.\n    return {\n        bind: -> bindAll()\n        unbind: -> unbindAll()\n    }\n)\n"]}